# vim: ft=sh ts=2 sw=2 et:

# Add zsh-completions if it exists
fpath=( $ZSH/plugins/zsh-completions/src(N) $fpath )

() {
  setopt localoptions extended_glob
  local zcompfile=${ZCOMPDUMP:-$ZSH/compdump}
  # NOTE: compinit's auto check always runs compaudit, which is pretty hefty
  # in startup time. So elide that, and use a basic daily recycle check.
  if [[ -f $zcompfile && -n $zcompfile(#qNm+1) ]]; then
    rm -f $zcompfile $zcompfile.zwc
  fi
  
  autoload -Uz compinit &&
  compinit -d $zcompfile -C
}
