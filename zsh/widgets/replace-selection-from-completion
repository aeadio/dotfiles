# vim: ft=sh ts=2 sw=2 et:

emulate -L zsh

local m=$MARK c=$CURSOR b=$BUFFER
zle delete-selection -w

zle fzf-tab-complete -w
local ret=$?
if (( ret == 1 )); then
  zle -K main
else
  BUFFER=$b
  zle set-mark-command -w
  MARK=$m
  CURSOR=$c
  zle reset-prompt -w
fi
